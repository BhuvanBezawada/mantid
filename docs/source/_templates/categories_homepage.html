{# Generates a  view for the Categories #}

{% extends "layout.html" %}

{% macro split_to_three_columns(item_list) -%}
{# Split list into 3 columns #}
{# Uses bootstrap col-md-4 for each column along with slice(3) to divide input list #}
{# It currently assumes the items in the list are mantiddoc.directives.categories.PageRef classes #}
    <div class="row">
    {% for column in item_list|slice(3) %}
      <div class="col-md-4">
      {% set first = [True] %}
      {% set section = [0] %}
      {% for item in column %}
        {% if (item.name[0] != section[0] or first[0]) %}
          {% set _ = section.pop() %}
          {% set _ = section.append(item.name[0]) %}
          {% if first[0] != True %}
            </ul>
          {% endif %}
          <h3 style="font-weight:bold">{{ section[0] }}</h3>
          <ul>
        {% endif %}
        <li><a href="{{ item.link(outpath) }}">{{ item.name }}</a></li>
        {% set _ = first.pop() %}
        {% set _ = first.append(False) %}
      {%- endfor -%}
      </ul>
      </div>
    {%- endfor -%}
    </div>
{%- endmacro %}

{%- block body -%}
    <h1> Category: {{ title }} </h1>
    <blockquote> Welcome to the Mantid Algorithm Categories page. This page provides a list of the categories into which the algorithms are split.
    Categories broadly correspond to either the technique that the category is used for (e.g. SANSConvertToQ is under SANS), or for
    more general algorithms, the type of function it performs (e.g. Load is under Data Handling). There is also a full alphabetical
    list of algorithms, which can be found <a href="https://docs.mantidproject.org/nightly/algorithms/index.html#algorithms-list">here.</a></blockquote>

    <br>
    {{ split_to_three_columns(subcategories) }}

    {% if pages %}
    <h2> Pages </h2>
      {% if pages|length > 10 %}
        {{ split_to_three_columns(pages) }}
      {% endif %}
    {% endif %}
    
    {% if parentcategory %}
    <p> {{ parentcategory }} </p>
    {% endif %}

{%- endblock -%}
